<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>astraDev - API</title>
    <base href="/"/>
    <link href="css/docs.css" rel="stylesheet" />
    <link href="css/fontawesome.css" rel="stylesheet" />
    <link href="css/fonts.css" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Calistoga&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif:ital@0;1&display=swap" rel="stylesheet">
</head>
<body>
<div class="sidebar" id="sidebar">
    <h3 style="text-align:center;color:#b1b1b1;">Docs: API</h3>
    <hr class="hr">
    <a href="/"><i class="fa-solid fa-arrow-left"></i> Return Home</a>
    <hr class="hr">
    <a href="docs/api#info" class="dropdown">Info</a>
    <div>
        <a href="docs/api#started" class="dropdown-a">Getting Started</a>
    </div>
    <a class="dropdown">Objects</a>
    <div>
        <a href="docs/api/objects#file" class="dropdown-a">File</a>
        <a href="docs/api/objects#roles" class="dropdown-a">Roles</a>
        <a href="docs/api/objects#url" class="dropdown-a">Url</a>
    </div>
    <a class="dropdown">API Endpoints</a>
    <div>
        <a href="docs/api/endpoints#get-api" class="dropdown-a">Get Status</a>
        <a href="docs/api/endpoints#post-api" class="dropdown-a">Create User</a>
        <a href="docs/api/endpoints#patch-api" class="dropdown-a">Reset Key</a>
        <a href="docs/api/endpoints#delete-api" class="dropdown-a">Modify Status</a>
        <a href="docs/api/endpoints#delete-api" class="dropdown-a">Ban User</a>
    </div>
    <a class="dropdown">File Endpoints</a>
    <div>
        <a href="docs/api/endpoints#get-file" class="dropdown-a">Get File</a>
        <a href="docs/api/endpoints#patch-file" class="dropdown-a">Modify File</a>
    </div>
    <a class="dropdown">Url Endpoints</a>
    <div>
        <a href="docs/api/endpoints#get-url" class="dropdown-a">Get Url</a>
        <a href="docs/api/endpoints#post-url" class="dropdown-a">Add Url</a>
        <a href="docs/api/endpoints#patch-url" class="dropdown-a">Modify Url</a>
    </div>
</div>
<div class="content" id="content">
    <h2>Endpoints:</h2>
    <div class="textContent">
        <h3 id="API">API</h3>
        <div class="marginLow" id="get-api">
            <div class="spanMargin">
                <span class="webRoute GET">GET</span>
                <span>/api?query={ID}</span>
            </div>
            <p class="additionalInfo red">Requires an elevated role of <b>API_ACCESS</b></p>
            <p>Get the API status of a user account.</p>
            <details>
                <summary>
                    This endpoint returns 200 status with the following message:
                </summary>
                <div style="padding:25px;">
                    <table>
                        <tr>
                            <th>Response Message</th>
                        </tr>
                        <tr>
                            <td>NO ACCOUNT</td>
                        </tr>
                        <tr>
                            <td>ACTIVE</td>
                        </tr>
                        <tr>
                            <td>DISABLED</td>
                        </tr>
                        <tr>
                            <td>BANNED</td>
                        </tr>
                    </table>
                </div>
            </details>
        </div>
        <div class="marginLow" id="post-api">
            <div class="spanMargin">
                <span class="webRoute POST">POST</span>
                <span>/api</span>
            </div>
            <p class="additionalInfo red">Requires an elevated scope of <b>API_ACCESS</b></p>
            <p>Create a new API user account.</p>
            <details>
                <summary>JSON payload:</summary>
                <div style="padding:25px;">
                    <table>
                        <tr>
                            <th>Field name</th>
                            <th>Data type</th>
                            <th>Field value description</th>
                        </tr>
                        <tr>
                            <td>discord_id</td>
                            <td>Long</td>
                            <td>The discord id as a long</td>
                        </tr>
                    </table>
                </div>
            </details>
            <p>Returns a 200 on successful creation or a 400 if the user already exists</p>
        </div>
        <div class="marginLow" id="patch-api">
            <div class="spanMargin">
                <span class="webRoute PATCH">PATCH</span>
                <span>/api</span>
            </div>
            <p class="additionalInfo red">Requires an elevated scope of <b>API_ACCESS</b></p>
            <p>Reset and immediately invalid the old API key for an API user.</p>
            <details>
                <summary>JSON payload:</summary>
                <div style="padding:25px;">
                    <table>
                        <tr>
                            <th>Field</th>
                            <th>Data Type</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>discord_id</td>
                            <td>Long</td>
                            <td>The discord id as a long</td>
                        </tr>
                    </table>
                </div>
            </details>
            <p>Returns the api key</p>
        </div>
        <div class="marginLow" id="delete-api">
            <div class="spanMargin">
                <span class="webRoute DELETE">DELETE</span>
                <span>/api</span>
            </div>
            <p class="additionalInfo red">Requires an elevated scope of <b>API_ACCESS</b></p>
            <p class="additionalInfo orange">May require an audit log header (x-audit-reason) with a minimum char count of 10.</p>
            <p>If the audit log header is missing then the default action is to disable the API user. If the header is present the default action is to ban the API user. </p>
            <details>
                <summary>JSON payload:</summary>
                <div style="padding:25px;">
                    <table>
                        <tr>
                            <th>Field</th>
                            <th>Data Type</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>discord_id</td>
                            <td>Long</td>
                            <td>The discord id as a long</td>
                        </tr>
                    </table>
                </div>
            </details>
            <p>Returns a 200 on success or in the case of a failed ban 400 will be returned.</p>
        </div>
    </div>
    <div class="textContent">
        <h3 id="File">File</h3>
        <div class="marginLow" id="get-file">
            <div class="spanMargin">
                <span class="webRoute GET">GET</span>
                <span>/file?query={sha256}</span>
            </div>
            <p>Check a file's SHA256 hash with our database to see if a file <b>MIGHT</b> be malicious. THIS DOES NOT REPLACE ANTIVIRUS SOFTWARE.</p>
            <p>Returns a <a href="docs/api/objects#file" class="a">FILE</a> object.</p>
            <div class="spanMargin">
                <span class="webRoute GET">GET</span>
                <span>/file?id={id_long}</span>
            </div>
            <p>Check an ID with our database to see what that file's result is. THIS DOES NOT REPLACE ANTIVIRUS SOFTWARE.</p>
            <p>Returns a <a href="docs/api/objects#file" class="a">FILE</a> object.</p>
            <div class="spanMargin">
                <span class="webRoute GET">GET</span>
                <span>/file?page={long}</span>
            </div>
            <p class="additionalInfo red">Requires an elevated scope of <b>ARRAY_ACCESS</b></p>
            <p>Retrieve 50 results per page. THIS DOES NOT REPLACE ANTIVIRUS SOFTWARE.</p>
            <p>Returns a <a href="docs/api/objects#file" class="a">FILE</a> ARRAY object.</p>
        </div>
        <div class="marginLow" id="patch-file">
            <div class="spanMargin">
                <span class="webRoute PATCH">PATCH</span>
                <span>/file</span>
            </div>
            <p class="additionalInfo red">Requires an elevated scope of <b>MANAGE_FILE</b></p>
            <p>Modify the File data</p>
            <details>
                <summary>JSON payload:</summary>
                <div style="padding:25px;">
                    <table>
                        <tr>
                            <th>Field</th>
                            <th>Data Type</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>sha256</td>
                            <td>String</td>
                            <td>The file's sha256 hex as string</td>
                        </tr>
                        <tr>
                            <td>sample_available</td>
                            <td>Boolean</td>
                            <td>The OPTIONAL sample available result as boolean</td>
                        </tr>
                        <tr>
                            <td>classification</td>
                            <td>String</td>
                            <td>The OPTIONAL classification as String</td>
                        </tr>
                    </table>
                </div>
            </details>
            <p>This will default to running sample_available only if both are set. Returns 200 on success</p>
        </div>
    </div>
    <div class="textContent">
        <h3 id="Url">Url</h3>
        <div class="marginLow" id="get-url">
            <div class="spanMargin">
                <span class="webRoute GET">GET</span>
                <span>/url?query={subdomain.domain.tld}</span>
            </div>
            <p>Check a URL with our database to see if a URL <b>MIGHT</b> be malicious. THIS DOES NOT REPLACE ANTIVIRUS SOFTWARE.</p>
            <p>Returns a <a href="docs/api/objects#url" class="a">URL</a> object.</p>
            <div class="spanMargin">
                <span class="webRoute GET">GET</span>
                <span>/url?page={long}</span>
            </div>
            <div class="spanMargin">
                <span class="webRoute GET">GET</span>
                <span>/url?id={id_long}</span>
            </div>
            <p>Check an ID with our database to see what that url's result is. THIS DOES NOT REPLACE ANTIVIRUS SOFTWARE.</p>
            <p>Returns a <a href="docs/api/objects#url" class="a">URL</a> object.</p>
            <div class="spanMargin">
                <span class="webRoute GET">GET</span>
                <span>/url?page={long}</span>
            </div>
            <p class="additionalInfo red">Requires an elevated scope of <b>ARRAY_ACCESS</b></p>
            <p>Retrieve 50 results per page. THIS DOES NOT REPLACE ANTIVIRUS SOFTWARE.</p>
            <p>Returns a <a href="docs/api/objects#url" class="a">URL</a> ARRAY object.</p>
        </div>
        <div id="post-url">
            <div class="spanMargin">
                <span class="webRoute POST">POST</span>
                <span>/url</span>
            </div>
            <p class="additionalInfo red">Requires an elevated scope of <b>MANAGE_URL</b></p>
            <p>Creates a new URL resource</p>
            <details>
                <summary>JSON payload:</summary>
                <div style="padding:25px;">
                    <table>
                        <tr>
                            <th>Field</th>
                            <th>Data Type</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>url</td>
                            <td>String</td>
                            <td>The url as subdomain.domain.tld as String.</td>
                        </tr>
                        <tr>
                            <td>reason</td>
                            <td>String</td>
                            <td>The blacklisting reason</td>
                        </tr>
                    </table>
                </div>
            </details>
            <p>Returns a 200 on successful creation.</p>
        </div>
        <div id="patch-url">
            <div class="spanMargin">
                <span class="webRoute PATCH">PATCH</span>
                <span>/url</span>
            </div>
            <p class="additionalInfo red">Requires an elevated scope of <b>MANAGE_URL</b></p>
            <p>Modify a URL resource</p>
            <details>
                <summary>JSON payload:</summary>
                <div style="padding:25px;">
                    <table>
                        <tr>
                            <th>Field</th>
                            <th>Data Type</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>url</td>
                            <td>String</td>
                            <td>The url as subdomain.domain.tld as String.</td>
                        </tr>
                        <tr>
                            <td>reason</td>
                            <td>String</td>
                            <td>The blacklisting reason</td>
                        </tr>
                    </table>
                </div>
            </details>
            <p>Returns a 200 on successful edit.</p>
        </div>
    </div>
</div>
</body>
</html>